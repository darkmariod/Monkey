
{% extends "base.html" %}
{% block title %}Servicios{% endblock %}

{% block content %}

<a href="{{ url_for('branch', branch_id=branch_id) }}" class="link-back">‚Üê Volver</a>

<h1 class="services-title">Servicios</h1>

<div class="services-toolbar">
  <div class="services-tabs">
    <span class="tab tab-active">
      Todos los servicios
      <span class="pill">{{ services|length }}</span>
    </span>
  </div>

  <div class="services-search">
    <input type="text" id="search-input" placeholder="Buscar servicio..." class="input">
  </div>
</div>

<div class="services-grid" id="services-list">
  {% for s in services %}
  <div class="service-card" data-name="{{ s.nombre|lower }} {{ s.descripcion|lower }}">
    <div class="service-main">
      <h3 class="service-name">{{ s.nombre }}</h3>
      <p class="service-meta">{{ s.duracion }} min</p>
      <p class="service-desc">{{ s.descripcion }}</p>
    </div>
    <div class="service-side">
      <div class="service-price">${{ "%.2f"|format(s.precio) }}</div>
      <a href="{{ url_for('barbers', branch=branch.key, service_id=s.id) }}" class="btn-primary btn-sm">
        Reservar
      </a>
    </div>
  </div>
  {% endfor %}
</div>

<script>
const input = document.getElementById('search-input');
const items = document.querySelectorAll('.service-card');

input.addEventListener('input', () => {
  const q = input.value.toLowerCase();
  items.forEach(card => {
    const text = card.getAttribute('data-name');
    card.style.display = text.includes(q) ? '' : 'none';
  });
});
</script>

{% endblock %}
