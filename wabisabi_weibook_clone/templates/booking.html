
{% extends "base.html" %}
{% block title %}Reserva{% endblock %}

{% block content %}

<a href="javascript:history.back()" class="link-back">← Volver</a>

<h1 class="services-title">Seleccionar fecha y hora</h1>

<div class="booking-layout">
  <div class="booking-main">
    <form action="{{ url_for('success') }}" method="get" class="booking-form" id="booking-form">

      <input type="hidden" name="barber" value="{{ barber_name }}">
      <input type="hidden" name="service" value="{{ servicio.nombre if servicio else service_id }}">
      <input type="hidden" name="branch" value="{{ branch_key }}">

      <input type="hidden" name="date" id="date_hidden">
      <input type="hidden" name="time" id="time_hidden">

      <div class="booking-row">
        <div class="booking-field">
          <label class="field-label">Fecha</label>
          <input type="date" class="input" id="date_picker" required>
        </div>
        <div class="booking-field">
          <label class="field-label">Hora</label>
          <input type="time" class="input" id="time_picker" required>
        </div>
      </div>

      <div class="booking-row">
        <div class="booking-field">
          <label class="field-label">Tu nombre</label>
          <input type="text" name="name" class="input" required>
        </div>
        <div class="booking-field">
          <label class="field-label">Teléfono</label>
          <input type="text" name="phone" class="input" required>
        </div>
      </div>

      <label class="field-label">Notas (opcional)</label>
      <textarea name="notes" class="input input-textarea" rows="3"></textarea>

      <button type="submit" class="btn-primary booking-submit">Confirmar reserva</button>
    </form>
  </div>

  <div class="summary-card">
    <h3 class="summary-title">Resumen</h3>
    <ul class="summary-list">
      <li><span>Barbero</span> {{ barber_name }}</li>
      <li><span>Servicio</span> {{ servicio.nombre if servicio else service_id }}</li>
      <li><span>Sede</span> {{ branch_key }}</li>
    </ul>
  </div>
</div>

<script>
document.getElementById('booking-form').addEventListener('submit', function() {
  document.getElementById('date_hidden').value = document.getElementById('date_picker').value;
  document.getElementById('time_hidden').value = document.getElementById('time_picker').value;
});
</script>

{% endblock %}
